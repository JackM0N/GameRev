
<!-- Forum Posts Table -->
<div class="forum-posts mt-4 bg-[#222222] shadow-lg overflow-hidden border border-[#00CFFF] px-6 py-4">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold">Posts</h2>
    <p *ngIf="isModerator()" class="text-[#fcba03] text-lg font-bold absolute left-1/2 transform -translate-x-1/2">
      You are a moderator of this forum
    </p>
  </div>
  
  <div class="overflow-x-auto">
    <table class="forum-posts-table w-full table-auto border-collapse">
      <thead class="bg-[#1A1A1A] text-[#E5E5E5]">
        <tr>
          <th class="p-4 border-b border-[#00CFFF]">Image</th>
          <th class="p-4 border-b border-[#00CFFF]">Post</th>
          <th class="p-4 border-b border-[#00CFFF]">Author</th>
          <th class="p-4 border-b border-[#00CFFF]">Post date</th>
          <th class="p-4 border-b border-[#00CFFF]">Replies</th>
          <th class="p-4 border-b border-[#00CFFF]">Last reply</th>
          <th class="p-4 border-b border-[#00CFFF]" *ngIf="canManageAnyPost() || isModerator()">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let post of postList; let i = index" class="hover:bg-[#333333]">
          <td class="p-4 border-b border-[#00CFFF]">
            <img *ngIf="post.picture" [src]="post.picture" alt="Post image" class="w-16 h-16 object-cover rounded">
          </td>

          <td class="p-4 border-b border-[#00CFFF]">
            <a (click)="navigateToPost(post.id)" class="text-cyan-400 hover:text-cyan-300 cursor-pointer font-semibold">
              {{ post.title }}
            </a>
          </td>

          <td class="p-4 border-b border-[#00CFFF]">{{ post.author?.nickname }}</td>

          <td class="p-4 border-b border-[#00CFFF]">{{ formatDateTimeArray(post.postDate) }}</td>

          <td class="p-4 border-b border-[#00CFFF]">{{ post.commentCount }}</td>

          <td class="p-4 border-b border-[#00CFFF]">
            {{ (post.lastResponseDate && post.commentCount && post.commentCount > 0) ? formatDateTimeArray(post.lastResponseDate) : '-' }}
          </td>

          <td class="pl-2 border-b border-[#00CFFF]" *ngIf="canManagePost(post) || isModerator()">
            <button class="bg-yellow-500 text-white px-3 pb-1 pt-2 hover:bg-yellow-600 ml-[1.5px]" (click)="openEditPostDialog(post)" *ngIf="canManagePost(post)">
              <i class="material-icons">edit</i>
            </button>

            <button class="bg-red-500 text-white px-3 pb-1 pt-2 hover:bg-red-600 ml-2" (click)="openDeletePostDialog(post)">
              <i class="material-icons">delete</i>
            </button>
          </td>
        </tr>
        
        <tr *ngIf="totalPosts == 0">
          <td class="p-4 border border-gray-300 text-center" colspan="7">No posts yet</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add new post -->
<div class="mt-6">
  <button class="synthwaveButton" *ngIf="authService.isAuthenticated()" (click)="openNewPostDialog()">Add new post</button>
</div>

<!-- Paginator -->
<div [hidden]="totalPosts < 5">
  <mat-paginator
    #paginator
    [length]="totalPosts"
    [pageSize]="10"
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons>
  </mat-paginator>
</div>
