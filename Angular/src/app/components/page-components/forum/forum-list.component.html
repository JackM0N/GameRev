<div *ngIf="!isSingleForum; else forumPostListTemplate">
  <!-- Breadcrumb Navigation -->
  <nav class="breadcrumb flex space-x-2 text-sm mb-4">
    <ng-container *ngFor="let segment of path; let i = index">
      <a *ngIf="i < path.length - 1" [href]="'/forum/' + segment.id" class="text-blue-500 cursor-pointer font-bold">
        {{ segment.forumName }}
      </a>
      <span *ngIf="i < path.length - 1"> &gt; </span>
      <span *ngIf="i === path.length - 1" class="font-bold">{{ segment.forumName }}</span>
    </ng-container>
  </nav>

  <!-- Forum Table -->
  <div *ngIf="currentForum" [hidden]="noSubForums" class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Main Forum Header -->
    <table class="forum-table w-full border-collapse table-auto">
      <thead class="bg-gray-200">
        <tr>
          <th colspan="3" class="p-4 border border-gray-300 text-left font-normal">
            <h2 class="text-xl font-bold">{{ currentForum.forumName }}</h2>
            <p class="text-base text-gray-700">{{ currentForum.description }}</p>
          </th>
        </tr>
      </thead>

      <tbody>
        <!-- Subforum Rows -->
        <tr *ngFor="let subforum of subForumList" class="hover:bg-gray-100">
          <td class="p-4 border border-gray-300">
            <a (click)="navigateToSubforum(subforum.id)" class="text-blue-500 cursor-pointer font-semibold">
              {{ subforum.forumName }}
            </a>
            <p class="text-gray-700">{{ subforum.description }}</p>
          </td>
          <td class="p-4 border border-gray-300">{{ subforum.postCount }} Post(s)</td>
          <td *ngIf="subforum.lastPost" class="p-4 border border-gray-300">
            <p class="text-gray-700">Last post by {{ subforum.lastPost.nickname }}</p>
            <p class="text-blue-500 cursor-pointer">in {{ subforum.lastPost.title }}</p>
            <p class="text-gray-600">on {{ formatDateTime(subforum.lastPost.last_response_date) }}</p>
          </td>
          <td *ngIf="!subforum.lastPost" class="p-4 border border-gray-300">
            <p class="text-gray-500">No interactions yet</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginator -->
  <mat-paginator
    #paginator
    [length]="totalSubforums"
    [pageSize]="10"
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons>
  </mat-paginator>
</div>

<ng-template #forumPostListTemplate>
  <app-forum-post-list [currentForum]="currentForum"></app-forum-post-list>
</ng-template>
